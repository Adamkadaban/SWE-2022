{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport * as React from \"react\";\nimport { createPopper } from \"@popperjs/core\";\nimport { getArrowStyles, toTransformOrigin } from \"./popper.utils\";\nvar isBrowser = typeof window !== \"undefined\";\nvar useSafeLayoutEffect = isBrowser ? React.useLayoutEffect : React.useEffect;\nexport function usePopper(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var {\n    placement: initialPlacement = \"bottom\",\n    offset: offsetProp,\n    preventOverflow = true,\n    fixed = false,\n    forceUpdate = true,\n    flip = true,\n    arrowSize = 10,\n    arrowShadowColor,\n    gutter = arrowSize,\n    eventsEnabled = true,\n    modifiers\n  } = props;\n  var popper = React.useRef(null);\n  var referenceRef = React.useRef(null);\n  var popoverRef = React.useRef(null);\n  var arrowRef = React.useRef(null);\n  var [originalPlacement, place] = React.useState(initialPlacement);\n  var [placement, setPlacement] = React.useState(initialPlacement);\n  var [offset] = React.useState(offsetProp || [0, gutter]);\n  var [popoverStyles, setPopoverStyles] = React.useState({});\n  var [arrowStyles, setArrowStyles] = React.useState({});\n  var update = React.useCallback(() => {\n    if (popper.current) {\n      popper.current.forceUpdate();\n      return true;\n    }\n\n    return false;\n  }, []);\n  var modifiersOverride = modifiers != null ? modifiers : [];\n  useSafeLayoutEffect(() => {\n    if (referenceRef.current && popoverRef.current) {\n      popper.current = createPopper(referenceRef.current, popoverRef.current, {\n        placement: originalPlacement,\n        strategy: fixed ? \"fixed\" : \"absolute\",\n        modifiers: [{\n          name: \"eventListeners\",\n          enabled: eventsEnabled\n        }, {\n          name: \"applyStyles\",\n          enabled: false\n        }, {\n          name: \"flip\",\n          enabled: flip,\n          options: {\n            padding: 8\n          }\n        }, {\n          name: \"computeStyles\",\n          options: {\n            gpuAcceleration: false,\n            adaptive: false\n          }\n        }, {\n          name: \"offset\",\n          options: {\n            offset\n          }\n        }, {\n          name: \"preventOverflow\",\n          enabled: preventOverflow,\n          options: {\n            tetherOffset: () => {\n              var _arrowRef$current;\n\n              return ((_arrowRef$current = arrowRef.current) == null ? void 0 : _arrowRef$current.clientWidth) || 0;\n            }\n          }\n        }, {\n          name: \"arrow\",\n          enabled: Boolean(arrowRef.current),\n          options: {\n            element: arrowRef.current\n          }\n        }, {\n          name: \"updateState\",\n          phase: \"write\",\n          enabled: true,\n\n          fn(_ref) {\n            var {\n              state\n            } = _ref;\n            setPlacement(state.placement);\n            setPopoverStyles(state.styles.popper);\n            setArrowStyles(state.styles.arrow);\n          }\n\n        }, ...modifiersOverride]\n      });\n    }\n\n    return () => {\n      if (popper.current) {\n        popper.current.destroy();\n        popper.current = null;\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [originalPlacement, fixed, forceUpdate, flip, offset, preventOverflow, eventsEnabled]);\n  useSafeLayoutEffect(() => {\n    var id = requestAnimationFrame(() => {\n      if (forceUpdate) {\n        var _popper$current;\n\n        (_popper$current = popper.current) == null ? void 0 : _popper$current.forceUpdate();\n      }\n    });\n    return () => {\n      cancelAnimationFrame(id);\n    };\n  }, [forceUpdate]);\n\n  var computedArrowStyles = _extends({}, arrowStyles, getArrowStyles(placement, arrowSize, arrowShadowColor));\n\n  return {\n    popperInstance: popper.current,\n    reference: {\n      ref: referenceRef\n    },\n    popper: {\n      ref: popoverRef,\n      style: _extends({}, popoverStyles, {\n        transformOrigin: toTransformOrigin(placement)\n      })\n    },\n    arrow: {\n      ref: arrowRef,\n      style: computedArrowStyles\n    },\n    update,\n    placement,\n    place\n  };\n}","map":{"version":3,"sources":["../../src/use-popper.ts"],"names":["isBrowser","useSafeLayoutEffect","React","props","placement","initialPlacement","offset","preventOverflow","fixed","forceUpdate","flip","arrowSize","gutter","eventsEnabled","modifiers","popper","referenceRef","popoverRef","arrowRef","offsetProp","update","modifiersOverride","createPopper","strategy","name","enabled","options","padding","gpuAcceleration","adaptive","tetherOffset","Boolean","element","current","phase","fn","state","setPlacement","setPopoverStyles","setArrowStyles","id","requestAnimationFrame","cancelAnimationFrame","computedArrowStyles","getArrowStyles","popperInstance","reference","ref","style","transformOrigin","toTransformOrigin","arrow","place"],"mappings":"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","sourcesContent":["import * as React from \"react\"\nimport { Instance, createPopper, Modifier } from \"@popperjs/core\"\nimport type { Placement } from \"@popperjs/core\"\nimport { getArrowStyles, toTransformOrigin } from \"./popper.utils\"\n\nconst isBrowser = typeof window !== \"undefined\"\nconst useSafeLayoutEffect = isBrowser ? React.useLayoutEffect : React.useEffect\n\nexport type { Placement }\n\nexport interface UsePopperProps {\n  gutter?: number\n  placement?: Placement\n  offset?: number\n  preventOverflow?: boolean\n  fixed?: boolean\n  forceUpdate?: boolean\n  flip?: boolean\n  arrowSize?: number\n  arrowShadowColor?: string\n  eventsEnabled?: boolean\n  modifiers?: Modifier<any, any>[]\n}\n\nexport function usePopper(props: UsePopperProps = {}) {\n  const {\n    placement: initialPlacement = \"bottom\",\n    offset: offsetProp,\n    preventOverflow = true,\n    fixed = false,\n    forceUpdate = true,\n    flip = true,\n    arrowSize = 10,\n    arrowShadowColor,\n    gutter = arrowSize,\n    eventsEnabled = true,\n    modifiers,\n  } = props\n\n  const popper = React.useRef<Instance | null>(null)\n  const referenceRef = React.useRef<HTMLButtonElement>(null)\n  const popoverRef = React.useRef<HTMLDivElement>(null)\n  const arrowRef = React.useRef<HTMLDivElement>(null)\n\n  const [originalPlacement, place] = React.useState(initialPlacement)\n  const [placement, setPlacement] = React.useState(initialPlacement)\n  const [offset] = React.useState(offsetProp || [0, gutter])\n  const [popoverStyles, setPopoverStyles] = React.useState<React.CSSProperties>(\n    {},\n  )\n  const [arrowStyles, setArrowStyles] = React.useState<React.CSSProperties>({})\n\n  const update = React.useCallback(() => {\n    if (popper.current) {\n      popper.current.forceUpdate()\n      return true\n    }\n    return false\n  }, [])\n\n  const modifiersOverride = modifiers ?? []\n\n  useSafeLayoutEffect(() => {\n    if (referenceRef.current && popoverRef.current) {\n      popper.current = createPopper(referenceRef.current, popoverRef.current, {\n        placement: originalPlacement,\n        strategy: fixed ? \"fixed\" : \"absolute\",\n        modifiers: [\n          {\n            name: \"eventListeners\",\n            enabled: eventsEnabled,\n          },\n          {\n            name: \"applyStyles\",\n            enabled: false,\n          },\n          {\n            name: \"flip\",\n            enabled: flip,\n            options: { padding: 8 },\n          },\n          {\n            name: \"computeStyles\",\n            options: { gpuAcceleration: false, adaptive: false },\n          },\n          {\n            name: \"offset\",\n            options: { offset },\n          },\n          {\n            name: \"preventOverflow\",\n            enabled: preventOverflow,\n            options: {\n              tetherOffset: () => arrowRef.current?.clientWidth || 0,\n            },\n          },\n          {\n            name: \"arrow\",\n            enabled: Boolean(arrowRef.current),\n            options: { element: arrowRef.current },\n          },\n          {\n            name: \"updateState\",\n            phase: \"write\",\n            enabled: true,\n            fn({ state }) {\n              setPlacement(state.placement)\n              setPopoverStyles(state.styles.popper as React.CSSProperties)\n              setArrowStyles(state.styles.arrow as React.CSSProperties)\n            },\n          },\n          ...modifiersOverride,\n        ],\n      })\n    }\n    return () => {\n      if (popper.current) {\n        popper.current.destroy()\n        popper.current = null\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    originalPlacement,\n    fixed,\n    forceUpdate,\n    flip,\n    offset,\n    preventOverflow,\n    eventsEnabled,\n  ])\n\n  useSafeLayoutEffect(() => {\n    const id = requestAnimationFrame(() => {\n      if (forceUpdate) {\n        popper.current?.forceUpdate()\n      }\n    })\n    return () => {\n      cancelAnimationFrame(id)\n    }\n  }, [forceUpdate])\n\n  const computedArrowStyles: React.CSSProperties = {\n    ...arrowStyles,\n    ...getArrowStyles(placement, arrowSize, arrowShadowColor),\n  }\n\n  return {\n    popperInstance: popper.current,\n    reference: {\n      ref: referenceRef,\n    },\n    popper: {\n      ref: popoverRef,\n      style: {\n        ...popoverStyles,\n        transformOrigin: toTransformOrigin(placement),\n      },\n    },\n    arrow: {\n      ref: arrowRef,\n      style: computedArrowStyles,\n    },\n    update,\n    placement,\n    place,\n  }\n}\n\nexport type UsePopperReturn = ReturnType<typeof usePopper>\n"]},"metadata":{},"sourceType":"module"}