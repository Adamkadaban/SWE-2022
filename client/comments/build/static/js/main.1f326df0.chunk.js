(this["webpackJsonpcommenting-app"]=this["webpackJsonpcommenting-app"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(129),c=n(0),r=n.n(c),o=n(41),l=n.n(o),u=n(48),i=n(2),s=n(124),m=n(131),d=n(123),p=n(121),f=n(122),E=n(32),b=n.n(E),g=n(42),O=n(130),v=n(75),C=n(128),j=n(51),S=n(120),y=n(68),w=n.n(y).a.initializeApp({apiKey:"AIzaSyA90nWci9Og0ZkyjiYYt6DuDybOrykCJ3o",authDomain:"comments-59fdf.firebaseapp.com",projectId:"comments-59fdf",storageBucket:"comments-59fdf.appspot.com",messagingSenderId:"460136898488",appId:"1:460136898488:web:14935515477222e3b4f94d",measurementId:"G-X0P98SV0HJ"}).firestore(),h=function(){var e=Object(O.a)(),t=e.isOpen,n=e.onOpen,a=e.onClose,o=Object(c.useState)(""),l=Object(i.a)(o,2),u=l[0],s=l[1],m=Object(c.useState)(""),d=Object(i.a)(m,2),f=d[0],E=d[1],y=Object(c.useState)(!1),h=Object(i.a)(y,2),k=h[0],x=h[1],A=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),t=new Date,e.next=4,w.collection("posts").add({title:u,content:f,upVotesCount:0,downVotesCount:0,createdAt:t.toUTCString(),updatedAt:t.toUTCString()});case 4:a(),s(""),E(""),x(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:n,colorScheme:"blue"},"Add new post"),r.a.createElement(C.a,{onClose:a,isOpen:t,isCentered:!0},r.a.createElement(C.g,null,r.a.createElement(C.d,null,r.a.createElement(C.f,null,"Add new post"),r.a.createElement(C.c,null),"            ",r.a.createElement(C.b,null,r.a.createElement(j.a,{id:"post-title"},r.a.createElement(j.b,null,"Post title"),r.a.createElement(S.a,{type:"post-title",value:u,onChange:function(e){return s(e.target.value)}}))),r.a.createElement(C.d,null,r.a.createElement(C.b,null,r.a.createElement(j.a,{id:"post-content"},r.a.createElement(j.b,null,"Post content"),r.a.createElement(S.a,{type:"post-content",value:f,onChange:function(e){return E(e.target.value)}})))),r.a.createElement(C.e,null,r.a.createElement(p.a,{spacing:2},r.a.createElement(v.a,{onClick:a},"Close"),r.a.createElement(v.a,{onClick:A,colorScheme:"blue",disabled:!u.trim(),isLoading:k},"Save")))))))},k=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{position:"sticky",top:0,p:4,bg:"gray.100",zIndex:1},r.a.createElement(d.a,{maxW:"md",centerContent:!0},r.a.createElement(s.a,{justifyContent:"flex-end",w:"100%",position:"sticky",top:0},r.a.createElement(h,null)))))},x=n(127),A=n(126),I=n(125),V=n(50),D=function(e){var t=e.post,n=Object(c.useState)(!1),a=Object(i.a)(n,2),o=a[0],l=a[1],u=Object(c.useState)([]),s=Object(i.a)(u,2),m=s[0],d=s[1];Object(c.useEffect)((function(){var e=localStorage.getItem("votes")||[],t=[];try{t=JSON.parse(e)}catch(n){console.error(n)}d(t)}),[]);var f=function(e){var t=m;t.push(e),d(t),localStorage.setItem("votes",JSON.stringify(m))},E=function(){var e=Object(g.a)(b.a.mark((function e(n){var a,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),a=t.upVotesCount,c=t.downVotesCount,r=new Date,"upvote"===n?a+=1:c+=1,e.next=7,w.collection("posts").doc(t.id).set({title:t.title,content:t.content,upVotesCount:a,downVotesCount:c,createdAt:t.createdAt,updatedAt:r.toUTCString()});case 7:f(t.id),l(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){return m.indexOf(t.id)>-1};return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,null,r.a.createElement(I.a,{size:"lg",colorScheme:"orange","aria-label":"Upvote",icon:r.a.createElement(V.b,null),onClick:function(){return E("upvote")},isLoading:o,isDisabled:O()}),r.a.createElement(A.a,{bg:"gray.100",rounded:"md",w:"100%",p:1},t.upVotesCount)),r.a.createElement(p.b,null,r.a.createElement(I.a,{size:"lg",colorScheme:"green","aria-label":"Downvote",icon:r.a.createElement(V.a,null),onClick:function(){return E("downvote")},isLoading:o,isDisabled:O()}),r.a.createElement(A.a,{bg:"gray.100",rounded:"md",w:"100%",p:1},t.downVotesCount)))},z=function(e){var t=e.post;return r.a.createElement(p.a,{key:t.id,w:"100%",alignItems:"flex-start"},r.a.createElement(D,{post:t}),r.a.createElement(f.a,{bg:"gray.100",p:4,rounded:"md",w:"100%"},r.a.createElement(x.a,{fontSize:"25px"},t.title),r.a.createElement(A.a,{fontSize:"15px"},t.content)))},J=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!0),l=Object(i.a)(o,2),f=l[0],E=l[1];return Object(c.useEffect)((function(){w.collection("posts").orderBy("createdAt","desc").get().then((function(e){var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));a(t),E(!1)}))}),[]),Object(c.useEffect)((function(){w.collection("posts").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),a(t)}))}),[]),f?r.a.createElement(s.a,{minH:"100vh",justifyContent:"center",alignItems:"center"},r.a.createElement(m.a,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(d.a,{maxW:"md",centerContent:!0,p:8},r.a.createElement(p.b,{spacing:8,w:"100%"},n.map((function(e){return r.a.createElement(z,{post:e,key:e.id})})))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(a.a,null,r.a.createElement(J,null))),document.getElementById("root"))},84:function(e,t,n){e.exports=n(107)}},[[84,1,2]]]);
//# sourceMappingURL=main.1f326df0.chunk.js.map